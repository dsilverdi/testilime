{% extends "core/pages/space_detail.html" %}
{% block content %}
    <div class="flex py-5 flex-col flex-grow sm:flex-row">
        <div class="w-full sm:max-w-[28rem] px-2 pb-5 sm:px-6">
            <div class="flex flex-col rounded-lg border border-gray-100 bg-white p-6 shadow">
                <h2 class="text-xl font-medium">Filter Testimonial</h2>
                <div class="mb-4 py-4" x-data="{ selectedProvider: '' }" x-on:change="filterTestimonials(selectedProvider)" >
                    <select x-model="selectedProvider" id="importProvider" name="importProvider" class="block w-full input">
                        <option value="" selected>All Providers</option>
                        <option value="csv">CSV</option>
                        <option value="youtube">YouTube</option>
                        <option value="whatsapp">WhatsApp</option>
                        <option value="tiktok">TikTok</option>
                        <option value="twitter">Twitter</option>
                        <option value="linkedin">LinkedIn</option>
                        <option value="shopify">Shopify</option>
                    </select>
                </div>
            </div>  
        </div>
        <div class="grid-flow-col gap-8 w-full px-2" x-data="{ testimonials: [] }" x-init="testimonials = await (await fetch('{% url 'testilime-core:get-testimonial-list' slug=project.slug %}')).json()">
            <template x-show="testimonials.length" x-for="testimonial in testimonials">
                <div class="flex flex-col space-y-5 rounded-lg border border-gray-100 bg-white p-6 shadow transition-all hover:shadow-lg mb-4">
                    <div class="flex justify-between items-center">
                        <h2 class="block text-lg mb-2 font-medium" x-text="testimonial.author_name"></h2>
                        <p class="text-gray-500" x-text="testimonial.created_at_formatted">Submitted at</p>
                    </div>
                    <p class="text-gray-700" x-text="testimonial.testimonial"></p>
                </div>
            </template>    
        </div>
    </div>

    <script>
        function filterTestimonials(selectedProvider) {
            console.log(selectedProvider)
            // Use the selected provider to filter testimonials
            // const filteredTestimonials = selectedProvider
            //    ? testimonials.filter(testimonial => testimonial.import_provider === selectedProvider)
            //    : testimonials;

            // Update the filteredTestimonials array
            // Alpine.store('filteredTestimonials', filteredTestimonials);
        }
    </script>
    
{% endblock %}