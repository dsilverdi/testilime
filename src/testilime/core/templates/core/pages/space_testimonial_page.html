{% extends "core/pages/space_detail.html" %}
{% block content %}
    <div class="flex py-5 flex-col flex-grow sm:flex-row">
        <div class="w-full sm:max-w-[28rem] px-2 pb-5 sm:px-6">
            <div class="flex flex-col rounded-lg border border-gray-100 bg-white p-6 shadow">
                <h2 class="text-xl font-medium">Filter Testimonial</h2>
                <div x-data="dropdown()" class="py-4">
                    <input
                        x-on:click="open = !open"
                        class="block w-full input caret-transparent"
                        placeholder="Search Providers"
                    >
                    
                    <div x-show="open" x-on:click.away="open = false" class="mt-2">
                        <!-- Dropdown content goes here -->
                        <div class="bg-white shadow-md rounded-md p-2">
                            <!-- Your dropdown list items go here -->
                            <div x-on:click="toggleOption('Option 1')" :class="{ 'bg-gray-200': selectedOptions.includes('Option 1') }" class="cursor-pointer hover:bg-gray-100 p-2">Option 1</div>
                            <div x-on:click="toggleOption('Option 2')" :class="{ 'bg-gray-200': selectedOptions.includes('Option 2') }" class="cursor-pointer hover:bg-gray-100 p-2">Option 2</div>
                            <div x-on:click="toggleOption('Option 3')" :class="{ 'bg-gray-200': selectedOptions.includes('Option 3') }" class="cursor-pointer hover:bg-gray-100 p-2">Option 3</div>
                            <div x-on:click="toggleOption('Option 4')" :class="{ 'bg-gray-200': selectedOptions.includes('Option 4') }" class="cursor-pointer hover:bg-gray-100 p-2">Option 4</div>
                            <div x-on:click="toggleOption('Option 5')" :class="{ 'bg-gray-200': selectedOptions.includes('Option 5') }" class="cursor-pointer hover:bg-gray-100 p-2">Option 5</div>
                        </div>
                    </div>
                
                    <!-- Display selected options below the input -->
                    <div class="grid grid-cols-3 gap-1 py-4">
                        <template x-show="selectedOptions.length" x-for="providerOption in selectedOptions">
                            <div class="text-center font-medium px-3 py-2 rounded-md border shadow flex justify-between items-center">
                                <span x-text="providerOption"></span>
                                <button type="button" @click="status = ''" class="ml-2 focus:outline-none">
                                    <svg class="h-4 w-4 text-gray-500" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                         </template>
                    </div>
                    
                </div>
            </div>  
        </div>
        <div class="grid-flow-col gap-8 w-full px-2" x-data="{ testimonials: [] }" x-init="testimonials = await (await fetch('{% url 'testilime-core:get-testimonial-list' slug=project.slug %}')).json()">
            <template x-show="testimonials.length" x-for="testimonial in testimonials">
                <div class="flex flex-col space-y-5 rounded-lg border border-gray-100 bg-white p-6 shadow transition-all hover:shadow-lg mb-4">
                    <div class="flex justify-between items-center">
                        <h2 class="block text-lg mb-2 font-medium" x-text="testimonial.author_name"></h2>
                        <p class="text-gray-500" x-text="testimonial.created_at_formatted">Submitted at</p>
                    </div>
                    <p class="text-gray-700" x-text="testimonial.testimonial"></p>
                </div>
            </template>    
        </div>
    </div>

    <script>
        function filterTestimonials(selectedProvider) {
            console.log(selectedProvider)
            // Use the selected provider to filter testimonials
            // const filteredTestimonials = selectedProvider
            //    ? testimonials.filter(testimonial => testimonial.import_provider === selectedProvider)
            //    : testimonials;

            // Update the filteredTestimonials array
            // Alpine.store('filteredTestimonials', filteredTestimonials);
        }

        function dropdown() {
            return {
                open: false,
                selectedOptions: [],

                toggleOption(option) {
                    const index = this.selectedOptions.indexOf(option);

                    if (index === -1) {
                        this.selectedOptions.push(option);
                    } else {
                        this.selectedOptions.splice(index, 1);
                    }

                    const options = this.selectedOptions
                },
            };
        }
    </script>
    
{% endblock %}